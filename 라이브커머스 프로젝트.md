# Live Commerce ê°œë°œ ë°±ì„œ

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
3. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
4. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
5. [ì£¼ìš” ê¸°ëŠ¥ ìƒì„¸](#ì£¼ìš”-ê¸°ëŠ¥-ìƒì„¸)
6. [ì„¤ì¹˜ ë° ì„¤ì •](#ì„¤ì¹˜-ë°-ì„¤ì •)
7. [API ë¬¸ì„œ](#api-ë¬¸ì„œ)
8. [ê°œë°œ ê°€ì´ë“œ](#ê°œë°œ-ê°€ì´ë“œ)
9. [ë°°í¬ ê°€ì´ë“œ](#ë°°í¬-ê°€ì´ë“œ)
10. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
11. [í™•ì¥ ê³„íš](#í™•ì¥-ê³„íš)

---

## í”„ë¡œì íŠ¸ ê°œìš”

### í”„ë¡œì íŠ¸ëª…
**Live Commerce** - ì‹¤ì‹œê°„ ë¼ì´ë¸Œ ìŠ¤íŠ¸ë¦¬ë° í”Œë«í¼

### í”„ë¡œì íŠ¸ ëª©ì 
ìì²´ ë¼ì´ë¸Œì»¤ë¨¸ìŠ¤ ì†”ë£¨ì…˜ì„ êµ¬ì¶•í•œ Next.js 16 ê¸°ë°˜ì˜ ì‹¤ì‹œê°„ ë¼ì´ë¸Œ ìŠ¤íŠ¸ë¦¬ë° í”Œë«í¼ì…ë‹ˆë‹¤. YouTube í†µí•©ê³¼ ìì²´ ìŠ¤íŠ¸ë¦¬ë° ì¸í”„ë¼ë¥¼ í†µí•´ ì™„ì „í•œ ë¼ì´ë¸Œì»¤ë¨¸ìŠ¤ ìƒíƒœê³„ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### í•µì‹¬ ê°€ì¹˜
- **ìì²´ ì†”ë£¨ì…˜**: ì™¸ë¶€ í”Œë«í¼ ì˜ì¡´ì„± ìµœì†Œí™”
- **ì‹¤ì‹œê°„ì„±**: ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° ë° ì±„íŒ… ì§€ì›
- **í†µí•© í”Œë«í¼**: YouTube + ìì²´ ìŠ¤íŠ¸ë¦¬ë° í†µí•©
- **ì™„ì „í•œ ë¼ì´ë¸Œì»¤ë¨¸ìŠ¤**: ë°©ì†¡, íŒë§¤, ê²°ì œ, ë°°ì†¡ í†µí•©
- **í™•ì¥ì„±**: ìˆ˜í‰ í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜
- **í”„ë¦¬ë¯¸ì—„ UI**: ë‹¤í¬ ëª¨ë“œ ê¸°ë°˜ ê³ ê¸‰ ì‚¬ìš©ì ê²½í—˜

---

## ê¸°ìˆ  ìŠ¤íƒ

### í”„ë¡ íŠ¸ì—”ë“œ
- **Next.js 16.1.3** (App Router)
  - Server Components & Server Actions
  - API Routes
  - Dynamic Routes
  - Image Optimization
- **React 18.3.1**
  - Hooks API
  - Suspense & Error Boundaries
- **TypeScript 5.6.3**
  - íƒ€ì… ì•ˆì •ì„±
  - ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ê°œë°œ
- **Tailwind CSS 3.4.19**
  - ìœ í‹¸ë¦¬í‹° í¼ìŠ¤íŠ¸ CSS
  - ë‹¤í¬ ëª¨ë“œ ì§€ì›
- **shadcn/ui**
  - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
- **Zustand 5.0.10**
  - ê²½ëŸ‰ ìƒíƒœ ê´€ë¦¬
  - ì„œë²„ ìƒíƒœ ë™ê¸°í™”

### ë°±ì—”ë“œ
- **Supabase**
  - PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
  - Realtime êµ¬ë…
  - Authentication (OAuth)
  - Row Level Security (RLS)
  - Storage
- **Node.js**
  - ì„œë²„ ì‚¬ì´ë“œ ë¡œì§
  - API Routes

### ìŠ¤íŠ¸ë¦¬ë° ì¸í”„ë¼
- **Node Media Server 4.2.4**
  - RTMP ì„œë²„
  - ìŠ¤íŠ¸ë¦¼ ìˆ˜ì‹  ë° ê´€ë¦¬
- **FFmpeg** (via fluent-ffmpeg 2.1.3)
  - RTMP â†’ HLS ë³€í™˜
  - ë¹„ë””ì˜¤ ì¸ì½”ë”©
- **Video.js 8.23.4**
  - HLS í”Œë ˆì´ì–´
  - í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì € ì§€ì›

### ì‹¤ì‹œê°„ í†µì‹ 
- **Socket.io 4.8.3**
  - WebSocket ê¸°ë°˜ ì±„íŒ…
  - ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ì „ì†¡

### ì™¸ë¶€ API
- **YouTube Data API v3**
  - ë¼ì´ë¸Œ ë°©ì†¡ ì •ë³´ ì¡°íšŒ
  - ì±„ë„ ì •ë³´ ë™ê¸°í™”
- **Cheerio 1.2.0**
  - HTML ìŠ¤í¬ë˜í•‘ (YouTube ëŒ€ì²´)

### ì§€ë„ ë° ì‹œê°í™”
- **Leaflet 1.9.4** + **React-Leaflet 4.2.1**
  - ì¸í„°ë™í‹°ë¸Œ ì§€ë„
  - ì§€ì—­ë³„ íŠ¹ì‚°ë¬¼ ì‹œê°í™”
- **Chart.js 4.5.1** + **react-chartjs-2 5.3.1**
  - í†µê³„ ì°¨íŠ¸
  - ë°ì´í„° ì‹œê°í™”

### ê°œë°œ ë„êµ¬
- **ESLint**
- **PostCSS** + **Autoprefixer**
- **TypeScript Compiler**

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      í´ë¼ì´ì–¸íŠ¸ (ë¸Œë¼ìš°ì €)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Next.js    â”‚  â”‚   Video.js   â”‚  â”‚  Socket.io   â”‚  â”‚
â”‚  â”‚   (React)    â”‚  â”‚   (Player)   â”‚  â”‚   (Chat)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ HTTP/WebSocket
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Next.js ì„œë²„ (Vercel)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  API Routes  â”‚  â”‚ Server Actionsâ”‚  â”‚  Middleware  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
         â”‚                    â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚ Supabaseâ”‚         â”‚ YouTube â”‚         â”‚ Streamingâ”‚
    â”‚   DB    â”‚         â”‚   API   â”‚         â”‚  Server  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° íë¦„

#### ë¼ì´ë¸Œ ë°©ì†¡ ì¡°íšŒ íë¦„
```
1. í´ë¼ì´ì–¸íŠ¸ ìš”ì²­
   â†“
2. Next.js API Route (/api/live-list)
   â†“
3. YouTube API í˜¸ì¶œ ë˜ëŠ” Supabase ì¡°íšŒ
   â†“
4. ë°ì´í„° ê°€ê³µ ë° ë°˜í™˜
   â†“
5. í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§
```

#### ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ íë¦„
```
1. Vercel Cron Job (30ì´ˆë§ˆë‹¤)
   â†“
2. YouTube API ë™ê¸°í™”
   â†“
3. Supabase ì—…ë°ì´íŠ¸
   â†“
4. Realtime êµ¬ë…ìì—ê²Œ ì•Œë¦¼
   â†“
5. í´ë¼ì´ì–¸íŠ¸ ìë™ ê°±ì‹ 
```

#### ìŠ¤íŠ¸ë¦¬ë° íë¦„ (ìì²´ í”Œë«í¼)
```
1. OBS/Prism â†’ RTMP ìŠ¤íŠ¸ë¦¼ ë°œí–‰
   â†“
2. Node Media Server ìˆ˜ì‹  (í¬íŠ¸ 1935)
   â†“
3. FFmpeg ë³€í™˜ (RTMP â†’ HLS)
   â†“
4. HLS íŒŒì¼ ìƒì„± (/public/streams/hls/{streamId}/)
   â†“
5. Video.js í”Œë ˆì´ì–´ë¡œ ì¬ìƒ
```

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
LiveCommerce/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ api/               # API Routes
â”‚   â”‚   â”‚   â”œâ”€â”€ bjs/           # í¬ë¦¬ì—ì´í„° API
â”‚   â”‚   â”‚   â”œâ”€â”€ live-list/     # ë¼ì´ë¸Œ ëª©ë¡ API
â”‚   â”‚   â”‚   â”œâ”€â”€ live-ranking/  # ë­í‚¹ API
â”‚   â”‚   â”‚   â”œâ”€â”€ products/      # ìƒí’ˆ API
â”‚   â”‚   â”‚   â”œâ”€â”€ orders/        # ì£¼ë¬¸ API
â”‚   â”‚   â”‚   â”œâ”€â”€ coins/         # ì½”ì¸ API
â”‚   â”‚   â”‚   â”œâ”€â”€ promotions/    # í”„ë¡œëª¨ì…˜ API
â”‚   â”‚   â”‚   â””â”€â”€ delivery/      # ë°°ì†¡ API
â”‚   â”‚   â”œâ”€â”€ auth/              # ì¸ì¦ í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ live/              # ë¼ì´ë¸Œ ë°©ì†¡ í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ map/               # ì§€ë„ í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ studio/            # í¬ë¦¬ì—ì´í„° ìŠ¤íŠœë””ì˜¤
â”‚   â”‚   â”œâ”€â”€ admin/             # ê´€ë¦¬ì í˜ì´ì§€
â”‚   â”‚   â””â”€â”€ page.tsx           # ë©”ì¸ í˜ì´ì§€
â”‚   â”œâ”€â”€ components/            # React ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ admin/             # ê´€ë¦¬ì ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ auth/              # ì¸ì¦ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ studio/            # ìŠ¤íŠœë””ì˜¤ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ payment/           # ê²°ì œ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ coin/              # ì½”ì¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ ui/                # ê³µí†µ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ lib/                   # ìœ í‹¸ë¦¬í‹° ë° ì„œë²„ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ actions/           # Server Actions
â”‚   â”‚   â”œâ”€â”€ streaming/         # ìŠ¤íŠ¸ë¦¬ë° ì„œë²„
â”‚   â”‚   â”œâ”€â”€ chat/              # ì±„íŒ… ì„œë²„
â”‚   â”‚   â”œâ”€â”€ utils/             # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”‚   â””â”€â”€ supabase-*.ts      # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ hooks/                 # Custom Hooks
â”‚   â”œâ”€â”€ store/                 # Zustand ìŠ¤í† ì–´
â”‚   â”œâ”€â”€ types/                 # TypeScript íƒ€ì… ì •ì˜
â”‚   â””â”€â”€ data/                  # ì •ì  ë°ì´í„°
â”œâ”€â”€ public/                    # ì •ì  íŒŒì¼
â”‚   â””â”€â”€ streams/              # HLS ìŠ¤íŠ¸ë¦¼ íŒŒì¼
â”œâ”€â”€ supabase/                  # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ schema.sql            # í…Œì´ë¸” ì •ì˜
â”‚   â”œâ”€â”€ rls.sql               # RLS ì •ì±…
â”‚   â””â”€â”€ seed.sql              # ì´ˆê¸° ë°ì´í„°
â”œâ”€â”€ scripts/                   # ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼
â”œâ”€â”€ next.config.js            # Next.js ì„¤ì •
â”œâ”€â”€ tailwind.config.js        # Tailwind ì„¤ì •
â”œâ”€â”€ tsconfig.json             # TypeScript ì„¤ì •
â””â”€â”€ package.json              # ì˜ì¡´ì„± ê´€ë¦¬
```

---

## ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ì£¼ìš” í…Œì´ë¸”

#### 1. í¬ë¦¬ì—ì´í„° (bjs)
```sql
CREATE TABLE bjs (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  name text NOT NULL,
  platform text NOT NULL DEFAULT 'youtube',
  thumbnail_url text,
  channel_url text NOT NULL,
  youtube_channel_id text,
  description text,
  is_active boolean DEFAULT true,
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now()
);
```

**ì¸ë±ìŠ¤:**
- `idx_bjs_youtube_channel_id`: YouTube ì±„ë„ ID ì¡°íšŒ ìµœì í™”
- `idx_bjs_platform`: í”Œë«í¼ë³„ í•„í„°ë§
- `idx_bjs_is_active`: í™œì„± í¬ë¦¬ì—ì´í„° ì¡°íšŒ

#### 2. ë¼ì´ë¸Œ ìŠ¤íŠ¸ë¦¼ (live_streams)
```sql
CREATE TABLE live_streams (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  bj_id uuid REFERENCES bjs(id) ON DELETE CASCADE NOT NULL,
  is_live boolean DEFAULT false,
  stream_url text,
  hls_url text,
  viewer_count integer DEFAULT 0,
  started_at timestamptz,
  ended_at timestamptz,
  title text,
  thumbnail_url text,
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now(),
  UNIQUE(bj_id)
);
```

**ì¸ë±ìŠ¤:**
- `idx_live_streams_bj`: í¬ë¦¬ì—ì´í„°ë³„ ì¡°íšŒ
- `idx_live_streams_is_live`: ë¼ì´ë¸Œ ë°©ì†¡ í•„í„°ë§
- `idx_live_streams_started_at`: ìµœì‹  ë°©ì†¡ ì •ë ¬

#### 3. í¬ë¦¬ì—ì´í„° í†µê³„ (bj_stats)
```sql
CREATE TABLE bj_stats (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  bj_id uuid REFERENCES bjs(id) ON DELETE CASCADE NOT NULL,
  current_rank integer,
  current_score numeric DEFAULT 0,
  viewer_count integer DEFAULT 0,
  donation_revenue numeric DEFAULT 0,
  superchat_revenue numeric DEFAULT 0,
  total_revenue numeric DEFAULT 0,
  date date DEFAULT CURRENT_DATE,
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now(),
  UNIQUE(bj_id, date)
);
```

#### 4. ìƒí’ˆ (products)
```sql
CREATE TABLE products (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  name text NOT NULL,
  description text,
  price numeric NOT NULL,
  stock integer DEFAULT 0,
  thumbnail_url text,
  image_url text,
  detail_images jsonb,
  detail_description text,
  bj_id uuid REFERENCES bjs(id),
  region_id uuid REFERENCES regions(id),
  local_product_id uuid REFERENCES local_products(id),
  category text,
  tags jsonb,
  is_specialty boolean DEFAULT false,
  specialty_id text,
  is_active boolean DEFAULT true,
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now()
);
```

#### 5. ì£¼ë¬¸ (orders)
```sql
CREATE TABLE orders (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id uuid REFERENCES auth.users(id),
  session_id text,
  total_amount numeric NOT NULL,
  discount_amount numeric DEFAULT 0,
  coin_payment_amount numeric DEFAULT 0,
  final_amount numeric NOT NULL,
  coin_earned integer DEFAULT 0,
  status text DEFAULT 'pending',
  payment_method text,
  shipping_address text,
  coupon_code text,
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now()
);
```

#### 6. ì½”ì¸ ì‹œìŠ¤í…œ
```sql
-- ì‚¬ìš©ì ì½”ì¸ ì”ì•¡
CREATE TABLE user_coins (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id uuid REFERENCES auth.users(id) UNIQUE NOT NULL,
  balance integer DEFAULT 0,
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now()
);

-- ì½”ì¸ ê±°ë˜ ë‚´ì—­
CREATE TABLE coin_transactions (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id uuid REFERENCES auth.users(id) NOT NULL,
  type text NOT NULL,
  amount integer NOT NULL,
  balance_after integer NOT NULL,
  description text,
  reference_id uuid,
  created_at timestamptz DEFAULT now()
);

-- ì½”ì¸ ì‹œì„¸
CREATE TABLE coin_prices (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  price_krw numeric NOT NULL,
  created_at timestamptz DEFAULT now()
);
```

#### 7. í”„ë¡œëª¨ì…˜ ì‹œìŠ¤í…œ
```sql
-- ì¿ í°
CREATE TABLE coupons (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  code text UNIQUE NOT NULL,
  type text NOT NULL,
  value numeric NOT NULL,
  min_purchase_amount numeric,
  max_discount_amount numeric,
  valid_from timestamptz,
  valid_until timestamptz,
  usage_limit integer,
  used_count integer DEFAULT 0,
  is_active boolean DEFAULT true,
  created_at timestamptz DEFAULT now()
);

-- 1+1 í”„ë¡œëª¨ì…˜
CREATE TABLE buy_one_get_one (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  product_id uuid REFERENCES products(id) NOT NULL,
  free_product_id uuid REFERENCES products(id) NOT NULL,
  valid_from timestamptz,
  valid_until timestamptz,
  is_active boolean DEFAULT true,
  created_at timestamptz DEFAULT now()
);

-- ì‚¬ì€í’ˆ í”„ë¡œëª¨ì…˜
CREATE TABLE free_gifts (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  product_id uuid REFERENCES products(id) NOT NULL,
  gift_product_id uuid REFERENCES products(id) NOT NULL,
  min_quantity integer DEFAULT 1,
  gift_quantity integer DEFAULT 1,
  valid_from timestamptz,
  valid_until timestamptz,
  is_active boolean DEFAULT true,
  created_at timestamptz DEFAULT now()
);
```

#### 8. ì§€ì—­ ë° íŠ¹ì‚°ë¬¼
```sql
-- ì§€ì—­
CREATE TABLE regions (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  name text NOT NULL,
  code text UNIQUE NOT NULL,
  latitude numeric,
  longitude numeric,
  created_at timestamptz DEFAULT now()
);

-- í¬ë¦¬ì—ì´í„°-ì§€ì—­ ì—°ë™
CREATE TABLE creator_regions (
  id uuid PRIMARY KEY DEFAULT uuid_generate_v4(),
  bj_id uuid REFERENCES bjs(id) ON DELETE CASCADE NOT NULL,
  region_id uuid REFERENCES regions(id) ON DELETE CASCADE NOT NULL,
  created_at timestamptz DEFAULT now(),
  UNIQUE(bj_id, region_id)
);
```

### Row Level Security (RLS)

ëª¨ë“  í…Œì´ë¸”ì— RLSê°€ í™œì„±í™”ë˜ì–´ ìˆìœ¼ë©°, ì‚¬ìš©ìë³„ ì ‘ê·¼ ê¶Œí•œì´ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

**ì£¼ìš” ì •ì±…:**
- ê³µê°œ ë°ì´í„° (bjs, live_streams): ëª¨ë“  ì‚¬ìš©ì ì½ê¸° ê°€ëŠ¥
- ì‚¬ìš©ì ë°ì´í„° (orders, user_coins): ë³¸ì¸ ë°ì´í„°ë§Œ ì ‘ê·¼ ê°€ëŠ¥
- ê´€ë¦¬ì ì „ìš©: ê´€ë¦¬ì ì—­í• ë§Œ ì ‘ê·¼ ê°€ëŠ¥

---

## ì£¼ìš” ê¸°ëŠ¥ ìƒì„¸

### 1. ì‹¤ì‹œê°„ ë¼ì´ë¸Œ ë°©ì†¡ í†µí•©

#### YouTube í†µí•©
- **YouTube Data API v3**ë¥¼ í†µí•œ ë¼ì´ë¸Œ ë°©ì†¡ ì •ë³´ ì¡°íšŒ
- 30ì´ˆë§ˆë‹¤ ìë™ ë™ê¸°í™” (Vercel Cron)
- ì‹¤ì‹œê°„ ì‹œì²­ì ìˆ˜ ì—…ë°ì´íŠ¸
- ë°©ì†¡ ì œëª© ë° ì¸ë„¤ì¼ ìë™ ê°±ì‹ 

#### ìì²´ ìŠ¤íŠ¸ë¦¬ë° í”Œë«í¼
- **RTMP ì„œë²„**: Node Media Server ê¸°ë°˜
- **HLS ë³€í™˜**: FFmpegë¥¼ í†µí•œ ì‹¤ì‹œê°„ ë³€í™˜
- **OBS/Prism í˜¸í™˜**: í‘œì¤€ RTMP í”„ë¡œí† ì½œ ì§€ì›
- **ìŠ¤íŠ¸ë¦¼ í‚¤ ê´€ë¦¬**: í¬ë¦¬ì—ì´í„°ë³„ ê³ ìœ  ìŠ¤íŠ¸ë¦¼ í‚¤

**ìŠ¤íŠ¸ë¦¬ë° ì„¤ì •:**
- RTMP í¬íŠ¸: 1935
- HLS ì¶œë ¥: `/public/streams/hls/{streamId}/index.m3u8`
- ë¹„íŠ¸ë ˆì´íŠ¸: 2500k (ë¹„ë””ì˜¤), 128k (ì˜¤ë””ì˜¤)
- í”„ë ˆì„ë ˆì´íŠ¸: 30fps
- GOP í¬ê¸°: 60 (2ì´ˆ)

### 2. í¬ë¦¬ì—ì´í„° ë­í‚¹ ì‹œìŠ¤í…œ

**ë­í‚¹ ì ìˆ˜ ê³„ì‚°:**
```
ì ìˆ˜ = ì‹œì²­ì ìˆ˜ Ã— ê°€ì¤‘ì¹˜ + í›„ì› ê¸ˆì•¡ Ã— ê°€ì¤‘ì¹˜ + ê´‘ê³  ìˆ˜ìµ Ã— ê°€ì¤‘ì¹˜
```

**ë­í‚¹ ì—…ë°ì´íŠ¸:**
- 30ë¶„ë§ˆë‹¤ ìë™ ê³„ì‚° (Vercel Cron)
- ì‹¤ì‹œê°„ ë­í‚¹ í‘œì‹œ
- ì¼ì¼/ì£¼ê°„/ì›”ê°„ ë­í‚¹ ì§€ì›

### 3. í†µí•© í”Œë ˆì´ì–´

**Universal Player** ì»´í¬ë„ŒíŠ¸:
- YouTube ì„ë² ë“œ í”Œë ˆì´ì–´
- ìì²´ HLS í”Œë ˆì´ì–´ (Video.js)
- ë¼ì´ë¸Œ ì±„íŒ… í†µí•©
- ëª¨ë°”ì¼ ìµœì í™”
- ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ ê´€ë¦¬

### 4. ë¼ì´ë¸Œ ì±„íŒ…

**Socket.io ê¸°ë°˜ ì‹¤ì‹œê°„ ì±„íŒ…:**
- WebSocket ì—°ê²°
- ì‹¤ì‹œê°„ ë©”ì‹œì§€ ì „ì†¡/ìˆ˜ì‹ 
- ì‚¬ìš©ì ì¸ì¦ í†µí•©
- ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬ ì €ì¥

### 5. ì „êµ­ íŠ¹ì‚°ë¬¼ ì§€ë„

**Leaflet ê¸°ë°˜ ì¸í„°ë™í‹°ë¸Œ ì§€ë„:**
- í•œêµ­ ì§€ë„ ì‹œê°í™”
- ì§€ì—­ë³„ íŠ¹ì‚°ë¬¼ í‘œì‹œ
- ê³„ì ˆë³„ í•„í„°ë§
- ì¹´í…Œê³ ë¦¬ë³„ í•„í„°ë§
- ëœë“œë§ˆí¬ íŠ¹ì‚°ë¬¼ ê°•ì¡°
- ì§€ì—­ë³„ ë¼ì´ë¸Œ ë°©ì†¡ ì—°ë™

### 6. ë¼ì´ë¸Œì»¤ë¨¸ìŠ¤ ê¸°ëŠ¥

#### ìƒí’ˆ ê´€ë¦¬
- ìƒí’ˆ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ
- ì´ë¯¸ì§€ ì—…ë¡œë“œ (ì¸ë„¤ì¼, ìƒì„¸ ì´ë¯¸ì§€)
- ì¬ê³  ê´€ë¦¬
- ì¹´í…Œê³ ë¦¬ ë° íƒœê·¸
- íŠ¹ì‚°ë¬¼ ì—°ë™

#### ì£¼ë¬¸ ì‹œìŠ¤í…œ
- ì¥ë°”êµ¬ë‹ˆ ê¸°ëŠ¥
- ì£¼ë¬¸ ìƒì„± ë° ê´€ë¦¬
- ê²°ì œ í†µí•© (Toss Payments)
- ì£¼ë¬¸ ìƒíƒœ ì¶”ì 

#### í”„ë¡œëª¨ì…˜ ì‹œìŠ¤í…œ
- ì¿ í° (í• ì¸ìœ¨/ê³ ì •ê¸ˆì•¡/ë¬´ë£Œë°°ì†¡)
- 1+1 í”„ë¡œëª¨ì…˜
- ì‚¬ì€í’ˆ í”„ë¡œëª¨ì…˜
- ìë™ í• ì¸ ì ìš©

#### ì½”ì¸ ì‹œìŠ¤í…œ
- ìƒí’ˆ êµ¬ë§¤ ì‹œ ì½”ì¸ ì ë¦½
- ì½”ì¸ìœ¼ë¡œ ìƒí’ˆ êµ¬ë§¤
- ì½”ì¸ ì‹œì„¸ ì¡°íšŒ
- ì½”ì¸ ê±°ë˜ ë‚´ì—­

#### ë°°ì†¡ ê´€ë¦¬
- ë°°ì†¡ ì •ë³´ ë“±ë¡
- ë°°ì†¡ ìƒíƒœ ì¶”ì 
- ë°°ì†¡ ì™„ë£Œ ì²˜ë¦¬

### 7. ê´€ë¦¬ì ë°±ì˜¤í”¼ìŠ¤

**ì£¼ìš” ê¸°ëŠ¥:**
- í¬ë¦¬ì—ì´í„° ê´€ë¦¬
- ìƒí’ˆ ê´€ë¦¬
- ì£¼ë¬¸ ê´€ë¦¬
- í”„ë¡œëª¨ì…˜ ê´€ë¦¬
- ê´‘ê³  ê´€ë¦¬
- ë­í‚¹ ê´€ë¦¬
- ì§€ì—­/íŠ¹ì‚°ë¬¼ ê´€ë¦¬

### 8. ì‚¬ìš©ì ì¸ì¦

**Supabase Auth í†µí•©:**
- ì´ë©”ì¼ íšŒì›ê°€ì…/ë¡œê·¸ì¸
- Google ì†Œì…œ ë¡œê·¸ì¸
- Facebook ì†Œì…œ ë¡œê·¸ì¸
- ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸
- ì„¸ì…˜ ê´€ë¦¬
- ì‚¬ìš©ì í”„ë¡œí•„ í™•ì¥

---

## ì„¤ì¹˜ ë° ì„¤ì •

### 1. í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

- **Node.js**: 18 ì´ìƒ
- **npm** ë˜ëŠ” **yarn**
- **Supabase ê³„ì •**
- **YouTube Data API v3 í‚¤** (ì„ íƒì‚¬í•­)
- **FFmpeg** (ìì²´ ìŠ¤íŠ¸ë¦¬ë° ì‚¬ìš© ì‹œ)

### 2. í”„ë¡œì íŠ¸ í´ë¡  ë° ì„¤ì¹˜

```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone <repository-url>
cd LiveCommerce

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install
```

### 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.env.local` íŒŒì¼ ìƒì„±:

```bash
# Supabase ì„¤ì • (í•„ìˆ˜)
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_URL=your_supabase_project_url
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# YouTube API (ì„ íƒì‚¬í•­)
YOUTUBE_API_KEY=your_youtube_api_key

# Cron Secret (Vercel Cron ì‚¬ìš© ì‹œ)
CRON_SECRET=your_random_secret_string

# Toss Payments (ê²°ì œ ì‚¬ìš© ì‹œ)
TOSS_CLIENT_KEY=your_toss_client_key
TOSS_SECRET_KEY=your_toss_secret_key
```

### 4. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

#### Supabase í”„ë¡œì íŠ¸ ìƒì„±
1. [Supabase](https://supabase.com)ì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
2. í”„ë¡œì íŠ¸ ì„¤ì •ì—ì„œ Database URLê³¼ API Keys í™•ì¸

#### ìŠ¤í‚¤ë§ˆ ìƒì„±
Supabase SQL Editorì—ì„œ ë‹¤ìŒ ìˆœì„œë¡œ ì‹¤í–‰:

1. **ìŠ¤í‚¤ë§ˆ ìƒì„±**: `supabase/schema.sql` ì‹¤í–‰
2. **RLS ì •ì±… ì„¤ì •**: `supabase/rls.sql` ì‹¤í–‰
3. **ì´ˆê¸° ë°ì´í„° ì‚½ì…** (ì„ íƒì‚¬í•­): `supabase/seed.sql` ì‹¤í–‰

ë˜ëŠ” Supabase CLI ì‚¬ìš©:

```bash
# Supabase CLI ì„¤ì¹˜
npm install -g supabase

# Supabase ë¡œê·¸ì¸
supabase login

# í”„ë¡œì íŠ¸ ì—°ê²°
supabase link --project-ref your-project-ref

# ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
supabase db push
```

### 5. ì¸ì¦ ì„¤ì •

#### Supabase Auth ì„¤ì •
1. **Supabase ëŒ€ì‹œë³´ë“œ** â†’ Authentication â†’ Providers
2. ë‹¤ìŒ ì œê³µì í™œì„±í™”:
   - Email (ê¸°ë³¸ í™œì„±í™”)
   - Google
   - Facebook
   - Kakao

#### OAuth ì œê³µì ì„¤ì •

**Google:**
1. [Google Cloud Console](https://console.cloud.google.com)ì—ì„œ í”„ë¡œì íŠ¸ ìƒì„±
2. OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±
3. ìŠ¹ì¸ëœ ë¦¬ë””ë ‰ì…˜ URI: `https://your-project.supabase.co/auth/v1/callback`
4. Supabaseì— Client IDì™€ Client Secret ì…ë ¥

**Facebook:**
1. [Facebook Developers](https://developers.facebook.com)ì—ì„œ ì•± ìƒì„±
2. ìŠ¹ì¸ëœ OAuth ë¦¬ë””ë ‰ì…˜ URI: `https://your-project.supabase.co/auth/v1/callback`
3. Supabaseì— App IDì™€ App Secret ì…ë ¥

**Kakao:**
1. [Kakao Developers](https://developers.kakao.com)ì—ì„œ ì•± ìƒì„±
2. Redirect URI: `https://your-project.supabase.co/auth/v1/callback`
3. Supabaseì— REST API í‚¤ ì…ë ¥

#### Site URL ì„¤ì •
- Authentication â†’ URL Configuration
- Site URL: `http://localhost:3000` (ê°œë°œ) ë˜ëŠ” í”„ë¡œë•ì…˜ URL
- Redirect URLs: `http://localhost:3000/auth/callback` ì¶”ê°€

### 6. FFmpeg ì„¤ì¹˜ (ìì²´ ìŠ¤íŠ¸ë¦¬ë° ì‚¬ìš© ì‹œ)

**Windows:**
```bash
# Chocolatey ì‚¬ìš©
choco install ffmpeg

# ë˜ëŠ” ì§ì ‘ ë‹¤ìš´ë¡œë“œ
# https://ffmpeg.org/download.html
```

**macOS:**
```bash
brew install ffmpeg
```

**Linux:**
```bash
sudo apt-get install ffmpeg
```

### 7. ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
# ê¸°ë³¸ ê°œë°œ ì„œë²„
npm run dev

# ìŠ¤íŠ¸ë¦¬ë° ì„œë²„ í¬í•¨ (ë³„ë„ í„°ë¯¸ë„)
npm run dev:streaming

# ì±„íŒ… ì„œë²„ í¬í•¨ (ë³„ë„ í„°ë¯¸ë„)
npm run dev:chat
```

ë¸Œë¼ìš°ì €ì—ì„œ [http://localhost:3000](http://localhost:3000) ì—´ê¸°

---

## API ë¬¸ì„œ

### ì¸ì¦ API

#### POST /api/auth/login
ì‚¬ìš©ì ë¡œê·¸ì¸

**Request:**
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**Response:**
```json
{
  "success": true,
  "user": { ... },
  "session": { ... }
}
```

### í¬ë¦¬ì—ì´í„° API

#### GET /api/bjs
í¬ë¦¬ì—ì´í„° ëª©ë¡ ì¡°íšŒ

**Query Parameters:**
- `platform`: 'youtube' | 'native' (ì„ íƒì‚¬í•­)
- `isActive`: boolean (ì„ íƒì‚¬í•­)

**Response:**
```json
{
  "success": true,
  "bjs": [
    {
      "id": "uuid",
      "name": "í¬ë¦¬ì—ì´í„°ëª…",
      "platform": "youtube",
      "thumbnailUrl": "https://...",
      "channelUrl": "https://...",
      ...
    }
  ]
}
```

#### POST /api/bjs
í¬ë¦¬ì—ì´í„° ì¶”ê°€

**Request:**
```json
{
  "name": "í¬ë¦¬ì—ì´í„°ëª…",
  "platform": "youtube",
  "channelUrl": "https://...",
  "youtubeChannelId": "channel-id"
}
```

#### GET /api/bjs/[id]
í¬ë¦¬ì—ì´í„° ìƒì„¸ ì¡°íšŒ

#### PATCH /api/bjs/[id]
í¬ë¦¬ì—ì´í„° ìˆ˜ì •

#### DELETE /api/bjs/[id]
í¬ë¦¬ì—ì´í„° ì‚­ì œ

### ë¼ì´ë¸Œ ë°©ì†¡ API

#### GET /api/live-list
ë¼ì´ë¸Œ ë°©ì†¡ ëª©ë¡ ì¡°íšŒ

**Response:**
```json
{
  "success": true,
  "streams": [
    {
      "bj": { ... },
      "title": "ë°©ì†¡ ì œëª©",
      "viewerCount": 1000,
      "isLive": true,
      "streamUrl": "https://...",
      ...
    }
  ]
}
```

#### GET /api/live-ranking
ë­í‚¹ ì¡°íšŒ

**Query Parameters:**
- `limit`: number (ê¸°ë³¸ê°’: 10)

**Response:**
```json
{
  "success": true,
  "ranking": [
    {
      "rank": 1,
      "bj": { ... },
      "viewerCount": 10000,
      "currentScore": 9500,
      ...
    }
  ]
}
```

#### GET /api/region-streams
ì§€ì—­ë³„ ë°©ì†¡ ì¡°íšŒ

**Query Parameters:**
- `regionId`: string (í•„ìˆ˜)

### ìƒí’ˆ API

#### GET /api/products
ìƒí’ˆ ëª©ë¡ ì¡°íšŒ

**Query Parameters:**
- `bjId`: uuid (ì„ íƒì‚¬í•­)
- `regionId`: uuid (ì„ íƒì‚¬í•­)
- `isSpecialty`: boolean (ì„ íƒì‚¬í•­)
- `category`: string (ì„ íƒì‚¬í•­)

#### POST /api/products
ìƒí’ˆ ì¶”ê°€

**Request:**
```json
{
  "name": "ìƒí’ˆëª…",
  "description": "ìƒí’ˆ ì„¤ëª…",
  "price": 10000,
  "stock": 100,
  "thumbnailUrl": "https://...",
  "imageUrl": "https://...",
  "detailImages": ["https://..."],
  "category": "ì¹´í…Œê³ ë¦¬",
  "tags": ["íƒœê·¸1", "íƒœê·¸2"],
  "isSpecialty": true,
  "regionId": "uuid",
  "specialtyId": "specialty-id"
}
```

#### GET /api/products/[id]
ìƒí’ˆ ìƒì„¸ ì¡°íšŒ

#### PATCH /api/products/[id]
ìƒí’ˆ ìˆ˜ì •

#### DELETE /api/products/[id]
ìƒí’ˆ ì‚­ì œ

### ì£¼ë¬¸ API

#### GET /api/orders
ì£¼ë¬¸ ëª©ë¡ ì¡°íšŒ

#### POST /api/orders
ì£¼ë¬¸ ìƒì„±

**Request:**
```json
{
  "items": [
    {
      "productId": "uuid",
      "quantity": 2,
      "price": 10000
    }
  ],
  "shippingAddress": "ë°°ì†¡ì§€ ì£¼ì†Œ",
  "couponCode": "COUPON123",
  "appliedPromotions": {
    "bogo": ["promo-id"],
    "freeGifts": ["gift-id"]
  }
}
```

#### GET /api/orders/[id]
ì£¼ë¬¸ ìƒì„¸ ì¡°íšŒ

#### PATCH /api/orders/[id]
ì£¼ë¬¸ ìƒíƒœ ì—…ë°ì´íŠ¸

### ì½”ì¸ API

#### GET /api/coins/balance
ì½”ì¸ ì”ì•¡ ì¡°íšŒ

**Response:**
```json
{
  "success": true,
  "balance": 1000,
  "priceKrw": 100
}
```

#### GET /api/coins/transactions
ì½”ì¸ ê±°ë˜ ë‚´ì—­ ì¡°íšŒ

#### GET /api/coins/price
ì½”ì¸ ì‹œì„¸ ì¡°íšŒ

### í”„ë¡œëª¨ì…˜ API

#### GET /api/coupons
ì¿ í° ëª©ë¡ ì¡°íšŒ

#### POST /api/coupons
ì¿ í° ìƒì„±

#### GET /api/promotions/buy-one-get-one
1+1 í”„ë¡œëª¨ì…˜ ëª©ë¡

#### GET /api/promotions/free-gifts
ì‚¬ì€í’ˆ í”„ë¡œëª¨ì…˜ ëª©ë¡

### ì§€ì—­ API

#### GET /api/regions
ì§€ì—­ ëª©ë¡ ì¡°íšŒ

#### GET /api/region-streams?regionId={id}
ì§€ì—­ë³„ ë°©ì†¡ ì¡°íšŒ

---

## ê°œë°œ ê°€ì´ë“œ

### ì»´í¬ë„ŒíŠ¸ ê°œë°œ

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```typescript
'use client'; // í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì¸ ê²½ìš°

import { useState, useEffect } from 'react';
import type { ComponentProps } from '@/types/...';

interface ComponentNameProps {
  // Props íƒ€ì… ì •ì˜
}

export function ComponentName({ ...props }: ComponentNameProps) {
  // ì»´í¬ë„ŒíŠ¸ ë¡œì§
  return (
    // JSX
  );
}
```

#### Server Component vs Client Component

**Server Component (ê¸°ë³¸):**
- ì„œë²„ì—ì„œ ë Œë”ë§
- ë°ì´í„°ë² ì´ìŠ¤ ì§ì ‘ ì ‘ê·¼ ê°€ëŠ¥
- ë²ˆë“¤ í¬ê¸° ê°ì†Œ
- ì¸í„°ë™í‹°ë¸Œ ê¸°ëŠ¥ ë¶ˆê°€

**Client Component (`'use client'`):**
- ë¸Œë¼ìš°ì €ì—ì„œ ë Œë”ë§
- useState, useEffect ë“± ì‚¬ìš© ê°€ëŠ¥
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì‚¬ìš© ê°€ëŠ¥
- ë²ˆë“¤ í¬ê¸° ì¦ê°€

### ìƒíƒœ ê´€ë¦¬

#### Zustand ìŠ¤í† ì–´ ì‚¬ìš©
```typescript
import { create } from 'zustand';

interface StoreState {
  data: DataType[];
  isLoading: boolean;
  fetchData: () => Promise<void>;
}

export const useStore = create<StoreState>((set) => ({
  data: [],
  isLoading: false,
  fetchData: async () => {
    set({ isLoading: true });
    const data = await fetch('/api/data').then(r => r.json());
    set({ data, isLoading: false });
  },
}));
```

### API Route ê°œë°œ

```typescript
import { NextResponse } from 'next/server';
import { supabaseAdmin } from '@/lib/supabase-server';

export const dynamic = 'force-dynamic'; // ë™ì  ë Œë”ë§ ê°•ì œ
export const revalidate = 30; // 30ì´ˆë§ˆë‹¤ ì¬ê²€ì¦

export async function GET(request: Request) {
  try {
    const { searchParams } = new URL(request.url);
    const param = searchParams.get('param');

    // ë°ì´í„° ì¡°íšŒ
    const { data, error } = await supabaseAdmin
      .from('table_name')
      .select('*');

    if (error) throw error;

    return NextResponse.json({
      success: true,
      data,
    });
  } catch (error) {
    return NextResponse.json(
      { success: false, error: 'Error message' },
      { status: 500 }
    );
  }
}
```

### Server Actions ì‚¬ìš©

```typescript
'use server';

import { supabaseAdmin } from '@/lib/supabase-server';

export async function serverActionName(params: ParamsType) {
  try {
    // ì„œë²„ ë¡œì§ ì‹¤í–‰
    const { data, error } = await supabaseAdmin
      .from('table_name')
      .insert(params);

    if (error) throw error;

    return { success: true, data };
  } catch (error) {
    return { success: false, error: 'Error message' };
  }
}
```

### ìŠ¤íƒ€ì¼ë§ ê°€ì´ë“œ

#### Tailwind CSS ì‚¬ìš©
```tsx
<div className="flex items-center gap-4 p-4 bg-card border border-zinc-800 rounded-xl">
  <h1 className="text-2xl font-bold text-foreground">ì œëª©</h1>
</div>
```

#### ë‹¤í¬ ëª¨ë“œ ìƒ‰ìƒ íŒ”ë ˆíŠ¸
- ë°°ê²½: `bg-background` (ê²€ì •)
- ì¹´ë“œ: `bg-card` (ì§„í•œ íšŒìƒ‰)
- í…ìŠ¤íŠ¸: `text-foreground` (í°ìƒ‰), `text-zinc-400` (íšŒìƒ‰)
- ê°•ì¡°: `text-amber-400` (ê³¨ë“œ), `bg-amber-500/20` (ê³¨ë“œ ë°°ê²½)

### íƒ€ì… ì •ì˜

ëª¨ë“  íƒ€ì…ì€ `src/types/` ë””ë ‰í† ë¦¬ì— ì •ì˜:

```typescript
// src/types/example.ts
export interface ExampleType {
  id: string;
  name: string;
  createdAt: string;
  updatedAt: string;
}

export interface ExampleCreateInput {
  name: string;
  // ...
}
```

### ì—ëŸ¬ ì²˜ë¦¬

```typescript
try {
  // ë¡œì§ ì‹¤í–‰
} catch (error) {
  console.error('Error:', error);
  // ì‚¬ìš©ìì—ê²Œ ì—ëŸ¬ í‘œì‹œ
  return { success: false, error: 'Error message' };
}
```

---

## ë°°í¬ ê°€ì´ë“œ

### Vercel ë°°í¬

#### 1. GitHubì— í”„ë¡œì íŠ¸ í‘¸ì‹œ
```bash
git init
git add .
git commit -m "Initial commit"
git remote add origin <repository-url>
git push -u origin main
```

#### 2. Vercelì— í”„ë¡œì íŠ¸ ì—°ê²°
1. [Vercel](https://vercel.com)ì— ë¡œê·¸ì¸
2. "New Project" í´ë¦­
3. GitHub ì €ì¥ì†Œ ì„ íƒ
4. í”„ë¡œì íŠ¸ ì„¤ì • í™•ì¸

#### 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
Vercel ëŒ€ì‹œë³´ë“œ â†’ Settings â†’ Environment Variablesì—ì„œ ì„¤ì •:
- `NEXT_PUBLIC_SUPABASE_URL`
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- `SUPABASE_SERVICE_ROLE_KEY`
- `YOUTUBE_API_KEY`
- `CRON_SECRET`

#### 4. ë¹Œë“œ ì„¤ì •
- Framework Preset: Next.js
- Build Command: `npm run build`
- Output Directory: `.next`

#### 5. ë°°í¬ ì™„ë£Œ
ìë™ ë°°í¬ê°€ ì™„ë£Œë˜ë©´ í”„ë¡œë•ì…˜ URLì´ ìƒì„±ë©ë‹ˆë‹¤.

### Vercel Cron ì„¤ì •

`vercel.json` íŒŒì¼ ìƒì„±:

```json
{
  "crons": [
    {
      "path": "/api/sync-youtube",
      "schedule": "*/30 * * * * *"
    },
    {
      "path": "/api/calculate-scores",
      "schedule": "*/30 * * * * *"
    }
  ]
}
```

### í™˜ê²½ë³„ ì„¤ì •

**ê°œë°œ í™˜ê²½:**
- Site URL: `http://localhost:3000`
- Redirect URLs: `http://localhost:3000/auth/callback`

**í”„ë¡œë•ì…˜ í™˜ê²½:**
- Site URL: `https://your-domain.com`
- Redirect URLs: `https://your-domain.com/auth/callback`

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ì¼ë°˜ì ì¸ ë¬¸ì œ

#### 1. ì´ë¯¸ì§€ ë¡œë“œ ì˜¤ë¥˜
**ë¬¸ì œ:** `next/image`ì—ì„œ ì™¸ë¶€ ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨

**í•´ê²°:**
`next.config.js`ì— ì´ë¯¸ì§€ í˜¸ìŠ¤íŠ¸ ì¶”ê°€:
```javascript
images: {
  remotePatterns: [
    {
      protocol: 'https',
      hostname: 'images.unsplash.com',
    },
  ],
}
```

#### 2. Supabase ì—°ê²° ì˜¤ë¥˜
**ë¬¸ì œ:** Supabase ì—°ê²° ì‹¤íŒ¨

**í•´ê²°:**
- í™˜ê²½ ë³€ìˆ˜ í™•ì¸
- Supabase í”„ë¡œì íŠ¸ ìƒíƒœ í™•ì¸
- RLS ì •ì±… í™•ì¸

#### 3. YouTube API í• ë‹¹ëŸ‰ ì´ˆê³¼
**ë¬¸ì œ:** YouTube API í• ë‹¹ëŸ‰ ì´ˆê³¼

**í•´ê²°:**
- API í‚¤ í• ë‹¹ëŸ‰ í™•ì¸
- ìš”ì²­ ë¹ˆë„ ê°ì†Œ
- ìºì‹± í™œìš©

#### 4. ë¹Œë“œ ì˜¤ë¥˜ (Turbopack)
**ë¬¸ì œ:** Turbopack ë¹Œë“œ ì‹¤íŒ¨

**í•´ê²°:**
`next.config.js`ì—ì„œ webpack ì‚¬ìš©:
```bash
npm run build -- --webpack
```

ë˜ëŠ” `next.config.js`ì— webpack ì„¤ì • ì¶”ê°€:
```javascript
webpack: (config, { isServer }) => {
  if (isServer) {
    config.externals = config.externals || [];
    config.externals.push({
      '@ffmpeg-installer/ffmpeg': 'commonjs @ffmpeg-installer/ffmpeg',
      'fluent-ffmpeg': 'commonjs fluent-ffmpeg',
      'node-media-server': 'commonjs node-media-server',
    });
  }
  return config;
}
```

#### 5. ìŠ¤íŠ¸ë¦¬ë° ì„œë²„ ì˜¤ë¥˜
**ë¬¸ì œ:** RTMP ìŠ¤íŠ¸ë¦¼ ìˆ˜ì‹  ì‹¤íŒ¨

**í•´ê²°:**
- í¬íŠ¸ 1935 ë°©í™”ë²½ í™•ì¸
- FFmpeg ì„¤ì¹˜ í™•ì¸
- ìŠ¤íŠ¸ë¦¼ í‚¤ í™•ì¸

#### 6. íƒ€ì… ì˜¤ë¥˜
**ë¬¸ì œ:** TypeScript íƒ€ì… ì˜¤ë¥˜

**í•´ê²°:**
- íƒ€ì… ì •ì˜ íŒŒì¼ í™•ì¸ (`src/types/`)
- íƒ€ì… ê°€ë“œ ì‚¬ìš©
- `any` íƒ€ì… ìµœì†Œí™”

### ì„±ëŠ¥ ìµœì í™”

#### 1. ì´ë¯¸ì§€ ìµœì í™”
- `next/image` ì‚¬ìš©
- ì ì ˆí•œ ì´ë¯¸ì§€ í¬ê¸°
- WebP í¬ë§· ì‚¬ìš©

#### 2. ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
- ì¸ë±ìŠ¤ ì¶”ê°€
- ì¿¼ë¦¬ ìµœì í™”
- í˜ì´ì§€ë„¤ì´ì…˜ êµ¬í˜„

#### 3. ë²ˆë“¤ í¬ê¸° ìµœì í™”
- ë™ì  ì„í¬íŠ¸ ì‚¬ìš©
- ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„± ì œê±°
- Tree shaking í™œì„±í™”

---

## í™•ì¥ ê³„íš

### Phase 1: ìì²´ ìŠ¤íŠ¸ë¦¬ë° ì„œë²„ âœ…
- RTMP ì„œë²„ êµ¬ì¶•
- HLS ë³€í™˜
- OBS/Prism í˜¸í™˜

### Phase 2: ìì²´ í”Œë ˆì´ì–´ âœ…
- Video.js ê¸°ë°˜ í”Œë ˆì´ì–´
- HLS ì¬ìƒ ì§€ì›
- ëª¨ë°”ì¼ ìµœì í™”

### Phase 3: ìì²´ ì±„íŒ… ì‹œìŠ¤í…œ âœ…
- Socket.io ê¸°ë°˜ ì±„íŒ…
- ì‹¤ì‹œê°„ ë©”ì‹œì§€ ì „ì†¡
- ì‚¬ìš©ì ì¸ì¦ í†µí•©

### Phase 4: í¬ë¦¬ì—ì´í„° ìŠ¤íŠœë””ì˜¤ âœ…
- ìŠ¤íŠ¸ë¦¼ ê´€ë¦¬
- ìƒí’ˆ ê´€ë¦¬
- í†µê³„ ëŒ€ì‹œë³´ë“œ

### Phase 5: ìƒí’ˆ ê´€ë¦¬ ë° ê²°ì œ ì‹œìŠ¤í…œ âœ…
- ìƒí’ˆ ë“±ë¡/ê´€ë¦¬
- ì¥ë°”êµ¬ë‹ˆ
- ì£¼ë¬¸ ì‹œìŠ¤í…œ
- ê²°ì œ í†µí•© (Toss Payments)
- í”„ë¡œëª¨ì…˜ ì‹œìŠ¤í…œ

### Phase 6: ë°°ì†¡ ê´€ë¦¬ ì‹œìŠ¤í…œ âœ…
- ë°°ì†¡ ì •ë³´ ê´€ë¦¬
- ë°°ì†¡ ìƒíƒœ ì¶”ì 
- ë°°ì†¡ ì™„ë£Œ ì²˜ë¦¬

### í–¥í›„ ê³„íš

#### Phase 7: ê³ ê¸‰ ê¸°ëŠ¥
- [ ] AI ê¸°ë°˜ ìƒí’ˆ ì¶”ì²œ
- [ ] ì‹¤ì‹œê°„ ì¬ê³  ê´€ë¦¬
- [ ] ë‹¤ì¤‘ í™”ë©´ ì§€ì›
- [ ] VR/AR í†µí•©

#### Phase 8: ëª¨ë°”ì¼ ì•±
- [ ] React Native ì•± ê°œë°œ
- [ ] í‘¸ì‹œ ì•Œë¦¼
- [ ] ëª¨ë°”ì¼ ê²°ì œ

#### Phase 9: ë¶„ì„ ë° ë¦¬í¬íŠ¸
- [ ] ê³ ê¸‰ ë¶„ì„ ëŒ€ì‹œë³´ë“œ
- [ ] ë¦¬í¬íŠ¸ ìƒì„±
- [ ] ë°ì´í„° ì‹œê°í™”

#### Phase 10: ê¸€ë¡œë²Œ í™•ì¥
- [ ] ë‹¤êµ­ì–´ ì§€ì›
- [ ] ë‹¤ì¤‘ í†µí™” ì§€ì›
- [ ] ê¸€ë¡œë²Œ ë°°ì†¡

---

## ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ
- [Next.js Documentation](https://nextjs.org/docs)
- [Supabase Documentation](https://supabase.com/docs)
- [YouTube Data API v3](https://developers.google.com/youtube/v3)
- [Video.js Documentation](https://videojs.com/getting-started/)
- [Socket.io Documentation](https://socket.io/docs/)

### ìœ ìš©í•œ ë§í¬
- [Tailwind CSS](https://tailwindcss.com/docs)
- [Zustand](https://github.com/pmndrs/zustand)
- [Leaflet](https://leafletjs.com/)
- [FFmpeg](https://ffmpeg.org/documentation.html)

---

## ë¼ì´ì„ ìŠ¤

MIT License

---

## ê¸°ì—¬ ê°€ì´ë“œ

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

---

**ë¬¸ì„œ ë²„ì „:** 1.0.0  
**ìµœì¢… ì—…ë°ì´íŠ¸:** 2024ë…„
